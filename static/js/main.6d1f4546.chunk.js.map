{"version":3,"sources":["Composition.js","Tile.js","RowButton.js","Row.js","Board.js","Controls.js","App.js","serviceWorker.js","index.js"],"names":["NOTES","SUBDIVS","Composition","_this","this","Object","classCallCheck","playAtPosition","current","total","tiles","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","rows","Symbol","iterator","next","done","row","value","playingTile","Math","floor","length","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","tile","note","col","isPlaying","push","err","return","randomiseNext","randomiseRows","play","playing","stop","randomise","numberOfRows","ceil","random","i","addRow","change","CompositionRow","pop","addTile","subtractTile","composition","numberOfTiles","CompositionTile","arguments","toString","colours","Tile","_this$props","props","updateComposition","width","colour","react_default","a","createElement","className","style","background","onClick","Component","RowButton","desktop","long","add","height","outerClassName","addTileToRow","subtractTileFromRow","subtractRow","text","lineHeight","Row","borderTop","borderBottom","RowButton_RowButton","assign","lib","onSwipeRight","onSwipeLeft","map","v","k","Tile_Tile","key","Board","boardHeight","handler","onSwipeUp","onSwipeDown","Row_Row","theme","createMuiTheme","palette","type","typography","useNextVariants","Controls","buttonStyle","margin","float","styles","AppBar_default","position","color","Toolbar_default","Button_default","variant","disabled","PlayArrow_default","Stop_default","Tone","Transport","PPQ","bpm","App","possibleConstructorReturn","getPrototypeOf","call","updateWindowDimensions","window","innerWidth","innerHeight","setState","state","synth","PolySynth","Synth","toMaster","scheduleRepeat","time","ticksPerBar","ticks","c","triggerAttackRelease","midiNote","prevState","start","cancel","fn","addEventListener","set","attack","release","src_Controls","Board_Board","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6d1f4546.chunk.js","sourcesContent":["const MINROWS = 2\nconst MAXROWS = 6\nconst MINWIDTH = 1\nconst MAXWIDTH = 9\nconst CHANCEOFREST = 0.5\nconst NOTES = [0, 'C', 'D', 'E', 'G', 'A']\nconst SUBDIVS = [2,3,4,5,6,8]\n// const INITIALROWS = 4\n\nclass Composition {\n  constructor(){\n    this.playing = false\n    this.rows = []\n    this.randomiseNext = false\n    this.randomise()\n  }\n  change(row, col){\n    this.rows[row].tiles[col].change()\n  }\n  playAtPosition = (current, total)=>{\n    let tiles = []\n    for(const row of this.rows){\n      let playingTile = Math.floor(current * row.tiles.length / total)\n      for(const tile of row.tiles){\n        const note = NOTES[tile.note]\n        if (note !== 0 && tile.col === playingTile) {\n          if (!tile.isPlaying) {\n            tile.isPlaying = true\n            tiles.push(tile)\n          }\n        } else {\n          tile.isPlaying = false\n        }\n      }\n    }\n    if (current === total - 1 && this.randomiseNext === true){\n      this.randomiseRows()\n    }\n    return tiles\n  }\n  play = ()=>{\n    this.playing = true\n  }\n  stop = ()=>{\n    this.playing = false\n    this.randomiseNext = false\n  }\n  randomise = ()=>{\n    if (this.playing === true) {\n      this.randomiseNext = true\n    } else {\n      this.randomiseRows()\n    }\n  }\n  randomiseRows = ()=>{\n    this.rows = []\n    this.randomiseNext = false\n    let numberOfRows = 1 + Math.ceil(Math.random() * 3)\n    for(let i = 0; i < numberOfRows; i++){\n      this.addRow()\n    }\n  }\n  addRow(){\n    // currently adds a random row. Should it?\n    this.rows.length < MAXROWS && this.rows.push(new CompositionRow(this, this.rows.length))\n  }\n  subtractRow(){\n    this.rows.length > MINROWS && this.rows.pop()\n  }\n  addTileToRow(row){\n    this.rows[row].addTile()\n  }\n  subtractTileFromRow(row){\n    this.rows[row].subtractTile()\n  }\n}\n\nclass CompositionRow {\n  constructor(composition, row){\n    this.composition = composition\n    this.tiles = []\n    this.row = row\n    this.randomise()\n  }\n  randomise(){\n    let numberOfTiles = SUBDIVS[Math.floor(Math.random() * SUBDIVS.length)]\n    for(let i = 0; i < numberOfTiles; i++){\n      this.tiles.push(new CompositionTile(this.composition, this.row, this.tiles.length, true))\n    }\n  }\n  addTile(){\n    this.tiles.length < MAXWIDTH && this.tiles.push(new CompositionTile(this.composition, this.row, this.tiles.length))\n  }\n  subtractTile(){\n    this.tiles.length > MINWIDTH && this.tiles.pop()\n  }\n}\n\nclass CompositionTile {\n  constructor(composition, row, col, randomise=false){\n    this.composition = composition\n    this.note = 0\n    this.row = row\n    this.col = col\n    this.isPlaying = false\n    randomise && this.randomise()\n  }\n  change(){\n    this.note = (this.note + 1) % 6\n  }\n  randomise(){\n    if (Math.random() > CHANCEOFREST){\n      this.note = Math.floor(Math.random() * (NOTES.length - 1)) + 1\n    }\n  }\n  midiNote(){\n    return NOTES[this.note] + (this.row + 2).toString()\n  }\n}\n\nexport default Composition","import React, { Component } from 'react';\nimport './Tile.scss';\n\nconst colours = [\n  \"#FFFFFF\", // white\n  \"#F70F0F\", // red\n  \"#FCD318\", // yellow\n  \"#344D90\", // blue\n  \"#A3A3A3\", // grey\n  \"#212121\" // black\n]\n\nexport default class Tile extends Component {\n  render(){\n    let {tile, updateComposition, width} = this.props\n    const colour = colours[tile.note]\n    const onClick = () => updateComposition((composition)=>{\n              composition.change(tile.row, tile.col)})\n    return (\n      <div className=\"Tile\"\n        style={{ width: width, background: colour }}\n          onClick={onClick}\n      >\n        <div \n          className={tile.isPlaying ? \"TileFlasher playing\" : \"TileFlasher\"} >\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\n\nexport default class RowButton extends Component {\n  render(){\n    const {desktop, long, add, row, height, updateComposition} = this.props\n    const addTile = () => updateComposition((composition)=>{\n              composition.addTileToRow(row.row)})\n    const subtractTile = () => updateComposition((composition)=>{\n              composition.subtractTileFromRow(row.row)})\n    const addRow = () => updateComposition((composition)=>{\n              composition.addRow()})\n    const subtractRow = () => updateComposition((composition)=>{\n              composition.subtractRow()})\n    let className = \"rowButton\", outerClassName = \"rowButtonOuter\"\n    let onClick = add ? addTile : subtractTile\n    if (long) {\n      className += \" long\"\n      outerClassName = \"longButtonOuter\"\n      onClick = add ? addRow : subtractRow\n    }\n    className +=  add ? \" add\" : \" subtract\"\n    const text = add ? \"+\" : \"–\"\n    return (\n      <div className={outerClassName}>\n        <div className={className} onClick={desktop ? onClick : undefined}\n            style={{ lineHeight: height }}>{text}</div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\nimport {Swipeable} from 'react-touch'\nimport Tile from './Tile'\nimport RowButton from './RowButton'\nimport './Row.scss'\n\nexport default class Row extends Component {\n  render(){\n    let {row, height, composition, updateComposition} = this.props\n    const style = {\n      height: height,\n      borderTop: row.row === 0 ? \"5px solid #212121\" : \"\",\n      borderBottom: row.row === (composition.rows.length - 1) ? \"5px solid #212121\" : \"\"\n    }\n    const addRow = () => updateComposition((composition)=>{\n              composition.addRow()})\n    const subtractRow = () => updateComposition((composition)=>{\n              composition.subtractRow()})\n    return (\n      <div className=\"RowOuter\">\n        <RowButton {...this.props} add={false} height={height}/>\n        <Swipeable onSwipeRight={subtractRow} onSwipeLeft={addRow} >\n          <div className=\"Row\" style={style}>\n            { row.tiles.map((v, k) => \n              <Tile {...this.props} tile={v} key={k} \n                width={(100 / row.tiles.length).toString() + \"%\"}\n              />\n              ) \n            }\n          </div>\n        </Swipeable>\n        <RowButton {...this.props} add={true} height={height}/>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport {Swipeable} from 'react-touch'\nimport Row from './Row';\nimport RowButton from './RowButton'\nimport './Board.scss';\n\nexport default class Board extends Component {\n  render(){\n    let {composition, boardHeight, handler} = this.props\n    const height = (boardHeight / composition.rows.length).toString() + \"px\"\n    return (\n      <div className=\"Board\">\n        <RowButton {...this.props} long={true} add={false} />\n        <Swipeable onSwipeUp={()=>handler('addRow')} onSwipeDown={()=>handler('subtractRow')} >\n          <div className=\"BoardInner\">\n            { composition.rows.map((v, k) => \n              <Row {...this.props} key={k} row={v} height={height}\n              /> ) \n            }\n          </div>\n        </Swipeable>\n        <RowButton {...this.props} long={true} add={true} />\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Button from '@material-ui/core/Button'\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow'\nimport StopIcon from '@material-ui/icons/Stop'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\nimport AppBar from '@material-ui/core/AppBar'\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark'\n  },\n  typography: {\n    useNextVariants: true,\n  }\n});\n\nclass Controls extends Component {\n  render(){\n    const {composition, play, stop, updateComposition} = this.props\n    const buttonStyle = {margin: '5px', float: 'left'}\n    const randomise = () => updateComposition((composition) => {\n      composition.randomise()\n    })\n    return (\n      <MuiThemeProvider theme={theme}>\n        <AppBar position=\"static\" color='default'>\n        <Toolbar>\n        <Button variant=\"contained\" onClick={play} disabled={composition.playing} style={buttonStyle}><PlayArrowIcon /></Button>\n        <Button variant=\"contained\" onClick={stop} disabled={!composition.playing} style={buttonStyle}><StopIcon /></Button>\n        <Button variant=\"contained\" onClick={randomise} disabled={composition.randomiseNext} style={buttonStyle}>Randomise</Button>\n        </Toolbar>\n        </AppBar>\n      </MuiThemeProvider>\n    )\n  }\n}\n\nexport default Controls;","import React, { Component } from 'react'\nimport './App.css'\nimport Tone from 'tone'\nimport Composition from './Composition'\nimport Board from './Board'\nimport Controls from './Controls'\n\nTone.Transport.PPQ = 24\nTone.Transport.bpm.value = 60\n\nclass App extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      composition: new Composition(),\n      synth: new Tone.PolySynth(8, Tone.Synth).toMaster(),\n      play: () => {\n        Tone.Transport.scheduleRepeat((time)=>{\n          const ticksPerBar = Tone.Transport.PPQ * 4\n          const position = Tone.Transport.ticks % ticksPerBar\n          const c = this.state.composition\n          const tiles = c.playAtPosition(position, ticksPerBar)\n          for(const tile of tiles){\n            this.state.synth.triggerAttackRelease(tile.midiNote(), \"32n\", time)\n          }\n          this.setState((prevState)=>{\n            return {composition: c}\n          })\n          \n        }, \"1i\")\n        Tone.start()\n        Tone.Transport.start(\"+0.2\")\n        this.state.updateComposition((c)=>{\n          c.play()\n        })\n      },\n      stop: () => {\n        Tone.Transport.stop()\n        Tone.Transport.cancel()\n        this.state.updateComposition((c)=>{\n          c.stop()\n        })\n      },\n      updateComposition: (fn) => {\n        this.setState((prevState) => {\n          fn(prevState.composition)\n          return {composition: prevState.composition}\n        })\n      }\n    }\n  }\n  updateWindowDimensions = () => {\n    const desktop = window.innerWidth > 600\n    const boardHeight = desktop ? window.innerHeight - 160 : \n      window.innerHeight - 110\n    this.setState({boardHeight: boardHeight, desktop: desktop})\n\n  }\n  componentDidMount(){\n    this.updateWindowDimensions()\n    window.addEventListener(\"resize\", this.updateWindowDimensions)\n    const synth = this.state.synth\n    synth.set(\"oscillator\", {\"type\": \"sine\"})\n    synth.set(\"volume\", -12)\n    synth.set(\"envelope\", {\"attack\": .015, \"release\": 1})\n    this.setState({synth: synth})\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <Controls {...this.state} />\n        <Board {...this.state} />\n      </div>\n    )\n  }\n}\n\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}