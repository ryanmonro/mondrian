(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(t,e,a){t.exports=a(301)},122:function(t,e,a){},123:function(t,e,a){},206:function(t,e,a){},207:function(t,e,a){},208:function(t,e,a){},301:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(32),r=a.n(o),s=(a(122),a(116)),l=a(110),c=a(14),d=a(15),u=a(17),h=a(16),p=a(18),m=a(7),b=(a(123),a(44)),v=(a(206),{white:"#FFFFFF",red:"#F70F0F",yellow:"#FCD318",blue:"#344D90",grey:"#A3A3A3",black:"#212121"}),f=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(d.a)(e,[{key:"colour",value:function(){return v[Object.keys(v)[this.props.note]]}},{key:"isPlaying",value:function(){var t=this.props,e=t.player,a=t.col,n=t.cols,i=e.position/100;return 0!==e.position&&(i>=a/n&&i<=(a+1)/n)}},{key:"render",value:function(){var t=this.props,e=t.change,a=(100/t.cols).toString()+"%";return i.a.createElement("div",{className:this.isPlaying()?"Tile playing":"Tile",style:{width:a}},i.a.createElement("div",{className:"TileInner",onClick:e,style:{background:this.colour()}}))}}]),e}(n.Component),y=(a(207),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this.props,e=t.board,a=t.row,n=t.ui,o=t.index,r=t.player,s=(n.height/e.data.length).toString()+"px";return i.a.createElement("div",{className:"RowOuter"},i.a.createElement("div",{className:"rowButtonOuter left"},i.a.createElement("div",{className:"rowButton subtract",onClick:n.desktop?function(){return e.functions.subtractTile(o)}:void 0,style:{lineHeight:s}},"\u2013")),i.a.createElement(b.Swipeable,{onSwipeRight:function(){return e.functions.subtractTile(o)},onSwipeLeft:function(){return e.functions.addTile(o)}},i.a.createElement("div",{className:"Row",style:{height:s,borderTop:0===o?"5px solid #212121":"",borderBottom:o===e.data.length-1?"5px solid #212121":""}},a.map(function(t,n){return i.a.createElement(f,{note:t,key:n,cols:a.length,col:n,player:r,change:function(){return e.functions.changeTile(o,n)}})}))),i.a.createElement("div",{className:"rowButtonOuter right"},i.a.createElement("div",{className:"rowButton add",onClick:n.desktop?function(){return e.functions.addTile(o)}:void 0,style:{lineHeight:s}},"+")))}}]),e}(n.Component)),w=(a(208),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this.props,e=t.board,a=t.player,n=t.ui;return i.a.createElement("div",{className:"boardOuter"},i.a.createElement("div",{className:"longButtonOuter"},i.a.createElement("div",{className:"rowButton long subtract",onClick:n.desktop?e.functions.subtractRow:void 0},"\u2013")),i.a.createElement(b.Swipeable,{onSwipeUp:e.functions.addRow,onSwipeDown:e.functions.subtractRow},i.a.createElement("div",{className:"Board"},e.data.map(function(t,o){return i.a.createElement(y,{row:t,key:o,index:o,board:e,player:a,ui:n})}))),i.a.createElement("div",{className:"longButtonOuter"},i.a.createElement("div",{className:"rowButton long add",onClick:n.desktop?e.functions.addRow:void 0},"+")))}}]),e}(n.Component)),g=a(9),O=a.n(g),k=a(113),E=a.n(k),j=a(45),S=a.n(j),N=a(114),T=a.n(N),x=a(115),C=a.n(x),W=a(61),R=a(112),B=a.n(R),D={minHeight:2,maxHeight:4,maxWidth:5,notes:[0,"C","D","E","G","A"],chanceOfRest:.5,subdivs:[3,4,5,6,8]};function F(){for(var t=[],e=0;e<4;e++){for(var a=[],n=D.subdivs[Math.floor(5*Math.random())],i=0;i<n;i++){var o=0;Math.random()>D.chanceOfRest&&(o=Math.ceil(Math.random()*(D.notes.length-1))),a.push(o)}t.push(a)}return t}var M=Object(W.createMuiTheme)({palette:{type:"dark"},typography:{useNextVariants:!0}}),H=function(t){function e(t){var a;Object(c.a)(this,e),(a=Object(u.a)(this,Object(h.a)(e).call(this,t))).handleChange=function(t){return function(e){a.setState(Object(l.a)({},t,e.target.value))}};for(var n=[],i=0;i<6;i++)n.push(new O.a.Synth({oscillator:{type:"sine"},volume:-12}).toMaster());return a.start=a.start.bind(Object(m.a)(Object(m.a)(a))),a.stop=a.stop.bind(Object(m.a)(Object(m.a)(a))),a.randomise=a.randomise.bind(Object(m.a)(Object(m.a)(a))),a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(m.a)(Object(m.a)(a))),a.state={windowWidth:0,windowHeight:0,board:{data:F(),functions:{changeTile:function(t,e){var n=a.state.board;n.data[t][e]=(n.data[t][e]+1)%6,a.setState({board:n})},addTile:function(t){var e=a.state.board;e.data[t].length<9&&(e.data[t].push(0),a.setState({board:e}))},subtractTile:function(t){var e=a.state.board;e.data[t].length>1&&(e.data[t].pop(),a.setState({board:e}))},addRow:function(){var t=a.state.board;t.data.length<6&&(t.data.push([0,0,0,0]),a.setState({board:t}))},subtractRow:function(){var t=a.state.board;t.data.length>1&&(t.data.pop(),a.setState({board:t}))}}},player:{position:0},playing:!1,synths:n,randomiseNext:!1,randomiseInterval:4},a}return Object(p.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),O.a.Transport.PPQ=24,O.a.Transport.bpm.value=60}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}},{key:"randomise",value:function(){if(!0===this.state.playing)this.setState({randomiseNext:!0});else{var t=F(),e=this.state.board;e.data=t,this.setState({board:e})}}},{key:"start",value:function(){var t=this;O.a.Transport.scheduleRepeat(function(e){var a=t.state,n=a.player,i=a.board,o=a.playPosition,r=a.synths,l=!0,c=!1,d=void 0;try{for(var u,h=i.data.entries()[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var p=u.value,m=Object(s.a)(p,2),b=m[0],v=m[1],f=D.notes,y=Math.floor(n.position/100*v.length);if(o[b]!==y){o[b]=y,o[b]===v.length&&(o[b]=0);var w=f[v[o[b]]];0!==w&&r[b].triggerAttackRelease(w+(b+2).toString(),"16n",e)}}}catch(k){c=!0,d=k}finally{try{l||null==h.return||h.return()}finally{if(c)throw d}}if(n.position>=100){if(n.position=1,!0===t.state.randomiseNext){var g=F(),O=t.state.board;O.data=g,t.setState({board:O,randomiseNext:!1})}}else n.position+=100/96;t.setState({player:n,playPosition:o})},"1i"),O.a.Transport.start("+0.1"),O.a.start();for(var e=[],a=0;a<6;a++)e[a]=-1;var n=this.state.player;n.position=1,this.setState({player:n,playPosition:e,playing:!0})}},{key:"stop",value:function(){O.a.Transport.stop(),O.a.Transport.cancel();for(var t=this.state.player,e=[],a=0;a<6;a++)e[a]=-1;t.position=0,this.setState({player:t,playPosition:e,playing:!1,randomiseNext:!1})}},{key:"buttonStyle",value:function(){return{margin:"5px",float:"left"}}},{key:"render",value:function(){var t=this.state,e=t.board,a=t.player,n=this.state.windowWidth>600,o={desktop:n,width:this.state.windowWidth,height:n?this.state.windowHeight-160:this.state.windowHeight-110};return i.a.createElement("div",{className:"App"},i.a.createElement(W.MuiThemeProvider,{theme:M},i.a.createElement(B.a,{position:"static",color:"default"},i.a.createElement(E.a,null,i.a.createElement(S.a,{variant:"contained",onClick:this.start,disabled:this.state.playing,style:this.buttonStyle()},i.a.createElement(T.a,null)),i.a.createElement(S.a,{variant:"contained",onClick:this.stop,disabled:!this.state.playing,style:this.buttonStyle()},i.a.createElement(C.a,null)),i.a.createElement(S.a,{variant:"contained",onClick:this.randomise,disabled:this.state.randomiseNext,style:this.buttonStyle()},"Randomise")))),i.a.createElement(w,{board:e,player:a,ui:o}))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[117,1,2]]]);
//# sourceMappingURL=main.9e997692.chunk.js.map