(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(t,e,n){t.exports=n(298)},119:function(t,e,n){},120:function(t,e,n){},203:function(t,e,n){},204:function(t,e,n){},205:function(t,e,n){},298:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(31),r=n.n(a),s=(n(119),n(4)),c=n(5),l=n(10),u=n(9),h=n(11),p=(n(120),n(12)),d=n.n(p),m=[0,"C","D","E","G","A"],f=[2,3,4,5,6,8],w=function(){function t(){var e=this;Object(s.a)(this,t),this.playAtPosition=function(t,n){var i=[],o=!0,a=!1,r=void 0;try{for(var s,c=e.rows[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u=Math.floor(t*l.tiles.length/n),h=!0,p=!1,d=void 0;try{for(var f,w=l.tiles[Symbol.iterator]();!(h=(f=w.next()).done);h=!0){var y=f.value;0!==m[y.note]&&y.col===u?y.isPlaying||(y.isPlaying=!0,i.push(y)):y.isPlaying=!1}}catch(v){p=!0,d=v}finally{try{h||null==w.return||w.return()}finally{if(p)throw d}}}}catch(v){a=!0,r=v}finally{try{o||null==c.return||c.return()}finally{if(a)throw r}}return t===n-1&&!0===e.randomiseNext&&e.randomiseRows(),i},this.play=function(){e.playing=!0},this.stop=function(){e.playing=!1,e.randomiseNext=!1},this.randomise=function(){!0===e.playing?e.randomiseNext=!0:e.randomiseRows()},this.randomiseRows=function(){e.rows=[],e.randomiseNext=!1;for(var t=1+Math.ceil(3*Math.random()),n=0;n<t;n++)e.addRow()},this.playing=!1,this.rows=[],this.randomiseNext=!1,this.randomise()}return Object(c.a)(t,[{key:"change",value:function(t,e){this.rows[t].tiles[e].change()}},{key:"addRow",value:function(){this.rows.length<6&&this.rows.push(new y(this,this.rows.length))}},{key:"subtractRow",value:function(){this.rows.length>2&&this.rows.pop()}},{key:"addTileToRow",value:function(t){this.rows[t].addTile()}},{key:"subtractTileFromRow",value:function(t){this.rows[t].subtractTile()}}]),t}(),y=function(){function t(e,n){Object(s.a)(this,t),this.composition=e,this.tiles=[],this.row=n,this.randomise()}return Object(c.a)(t,[{key:"randomise",value:function(){for(var t=f[Math.floor(Math.random()*f.length)],e=0;e<t;e++)this.tiles.push(new v(this.composition,this.row,this.tiles.length,!0))}},{key:"addTile",value:function(){this.tiles.length<9&&this.tiles.push(new v(this.composition,this.row,this.tiles.length))}},{key:"subtractTile",value:function(){this.tiles.length>1&&this.tiles.pop()}}]),t}(),v=function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(s.a)(this,t),this.composition=e,this.note=0,this.row=n,this.col=i,this.isPlaying=!1,o&&this.randomise()}return Object(c.a)(t,[{key:"change",value:function(){this.note=(this.note+1)%6}},{key:"randomise",value:function(){Math.random()>.5&&(this.note=Math.floor(Math.random()*(m.length-1))+1)}},{key:"midiNote",value:function(){return m[this.note]+(this.row+2).toString()}}]),t}(),b=w,g=n(43),O=(n(203),["#FFFFFF","#F70F0F","#FCD318","#344D90","#A3A3A3","#212121"]),j=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.tile,n=t.updateComposition,i=t.width,a=O[e.note];return o.a.createElement("div",{className:"Tile",style:{width:i,background:a},onClick:function(){return n(function(t){t.change(e.row,e.col)})}},o.a.createElement("div",{className:e.isPlaying?"TileFlasher playing":"TileFlasher"}))}}]),e}(i.Component),k=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.desktop,n=t.long,i=t.add,a=t.row,r=t.height,s=t.updateComposition,c="rowButton",l="rowButtonOuter",u=i?function(){return s(function(t){t.addTileToRow(a.row)})}:function(){return s(function(t){t.subtractTileFromRow(a.row)})};n&&(c+=" long",l="longButtonOuter",u=i?function(){return s(function(t){t.addRow()})}:function(){return s(function(t){t.subtractRow()})}),c+=i?" add":" subtract";var h=i?"+":"\u2013";return o.a.createElement("div",{className:l},o.a.createElement("div",{className:c,onClick:e?u:void 0,style:{lineHeight:r}},h))}}]),e}(i.Component),E=(n(204),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.row,i=e.height,a=e.composition,r=e.updateComposition,s={height:i,borderTop:0===n.row?"5px solid #212121":"",borderBottom:n.row===a.rows.length-1?"5px solid #212121":""};return o.a.createElement("div",{className:"RowOuter"},o.a.createElement(k,Object.assign({},this.props,{add:!1,height:i})),o.a.createElement(g.Swipeable,{onSwipeRight:function(){return r(function(t){t.subtractRow()})},onSwipeLeft:function(){return r(function(t){t.addRow()})}},o.a.createElement("div",{className:"Row",style:s},n.tiles.map(function(e,i){return o.a.createElement(j,Object.assign({},t.props,{tile:e,key:i,width:(100/n.tiles.length).toString()+"%"}))}))),o.a.createElement(k,Object.assign({},this.props,{add:!0,height:i})))}}]),e}(i.Component)),T=(n(205),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.composition,i=e.boardHeight,a=e.handler,r=(i/n.rows.length).toString()+"px";return o.a.createElement("div",{className:"Board"},o.a.createElement(k,Object.assign({},this.props,{long:!0,add:!1})),o.a.createElement(g.Swipeable,{onSwipeUp:function(){return a("addRow")},onSwipeDown:function(){return a("subtractRow")}},o.a.createElement("div",{className:"BoardInner"},n.rows.map(function(e,n){return o.a.createElement(E,Object.assign({},t.props,{key:n,row:e,height:r}))}))),o.a.createElement(k,Object.assign({},this.props,{long:!0,add:!0})))}}]),e}(i.Component)),R=n(111),C=n.n(R),N=n(44),S=n.n(N),x=n(112),F=n.n(x),P=n(113),M=n.n(P),A=n(60),B=n(110),D=n.n(B),W=Object(A.createMuiTheme)({palette:{type:"dark"},typography:{useNextVariants:!0}}),H=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.composition,n=t.play,i=t.stop,a=t.updateComposition,r={margin:"5px",float:"left"};return o.a.createElement(A.MuiThemeProvider,{theme:W},o.a.createElement(D.a,{position:"static",color:"default"},o.a.createElement(C.a,null,o.a.createElement(S.a,{variant:"contained",onClick:n,disabled:e.playing,style:r},o.a.createElement(F.a,null)),o.a.createElement(S.a,{variant:"contained",onClick:i,disabled:!e.playing,style:r},o.a.createElement(M.a,null)),o.a.createElement(S.a,{variant:"contained",onClick:function(){return a(function(t){t.randomise()})},disabled:e.randomiseNext,style:r},"Randomise"))))}}]),e}(i.Component);d.a.Transport.PPQ=24,d.a.Transport.bpm.value=60;var I=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).updateWindowDimensions=function(){var t=window.innerWidth>600,e=t?window.innerHeight-160:window.innerHeight-110;n.setState({boardHeight:e,desktop:t})},n.state={composition:new b,synth:new d.a.PolySynth(8,d.a.Synth).toMaster(),play:function(){d.a.Transport.scheduleRepeat(function(t){var e=4*d.a.Transport.PPQ,i=d.a.Transport.ticks%e,o=n.state.composition,a=o.playAtPosition(i,e),r=!0,s=!1,c=void 0;try{for(var l,u=a[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var h=l.value;n.state.synth.triggerAttackRelease(h.midiNote(),"32n",t)}}catch(p){s=!0,c=p}finally{try{r||null==u.return||u.return()}finally{if(s)throw c}}n.setState(function(t){return{composition:o}})},"1i"),d.a.start(),d.a.Transport.start("+0.2"),n.state.updateComposition(function(t){t.play()})},stop:function(){d.a.Transport.stop(),d.a.Transport.cancel(),n.state.updateComposition(function(t){t.stop()})},updateComposition:function(t){n.setState(function(e){return t(e.composition),{composition:e.composition}})}},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions);var t=this.state.synth;t.set("oscillator",{type:"sine"}),t.set("volume",-12),t.set("envelope",{attack:.015,release:1}),this.setState({synth:t})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(H,this.state),o.a.createElement(T,this.state))}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[114,1,2]]]);
//# sourceMappingURL=main.6d1f4546.chunk.js.map